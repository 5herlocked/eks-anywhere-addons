[ { "sha": "58dee1e2fdec28d85d5c4fbb1effc0f57a569e3c", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/openebs/helm-release.yaml", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/132b6f3f37b1e19a19b5293e8e27f2aebe814727/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fhelm-release.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/132b6f3f37b1e19a19b5293e8e27f2aebe814727/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fhelm-release.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fhelm-release.yaml?ref=132b6f3f37b1e19a19b5293e8e27f2aebe814727", "patch": "@@ -1,19 +0,0 @@\n----\n-apiVersion: helm.toolkit.fluxcd.io/v2beta1\n-kind: HelmRelease\n-metadata:\n- name: openebs\n- namespace: openebs\n-spec:\n- chart:\n- spec:\n- chart: openebs\n- reconcileStrategy: ChartVersion\n- sourceRef:\n- kind: HelmRepository\n- name: openebs\n- namespace: openebs\n- version: \"3.3.0\"\n- interval: 60s\n- targetNamespace: openebs\n- " }, { "sha": "d9665841e64ad0da69035d1a59f70ea5188f73ac", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/openebs/helm-repo.yaml", "status": "removed", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/132b6f3f37b1e19a19b5293e8e27f2aebe814727/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fhelm-repo.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/132b6f3f37b1e19a19b5293e8e27f2aebe814727/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fhelm-repo.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fhelm-repo.yaml?ref=132b6f3f37b1e19a19b5293e8e27f2aebe814727", "patch": "@@ -1,10 +0,0 @@\n----\n-apiVersion: source.toolkit.fluxcd.io/v1beta2\n-kind: HelmRepository\n-metadata:\n- name: openebs\n- namespace: openebs\n-spec:\n- interval: 30s\n- url: https://openebs.github.io/charts\n-" }, { "sha": "de9f0a8449e1f7ecfb331a60afc362319e7d5bb5", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/openebs/kustomization.yaml", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/132b6f3f37b1e19a19b5293e8e27f2aebe814727/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fkustomization.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/132b6f3f37b1e19a19b5293e8e27f2aebe814727/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fkustomization.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fopenebs%2Fkustomization.yaml?ref=132b6f3f37b1e19a19b5293e8e27f2aebe814727", "patch": "@@ -1,6 +0,0 @@\n-apiVersion: kustomize.config.k8s.io/v1beta1\n-kind: Kustomization\n-resources:\n- - namespace.yaml\n- - helm-repo.yaml\n- - helm-release.yaml\n\\ No newline at end of file" }, { "sha": "df0cd2432ec58a46ad91c81440e4c6c5b5e0cccd", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/storage-driver.yaml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fstorage-driver.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fstorage-driver.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fstorage-driver.yaml?ref=919469f6ec8827550101162b3710347d1ee8a735", "patch": "@@ -1,10 +1,10 @@\n apiVersion: kustomize.toolkit.fluxcd.io/v1beta2\n kind: Kustomization\n metadata:\n- name: openebs\n+ name: vmware-csi\n namespace: flux-system\n spec:\n- path: \"./eks-anywhere-vsphere/Addons/Core/storage-driver/openebs\"\n+ path: \"./eks-anywhere-vsphere/Addons/Core/storage-driver/vmware-csi\"\n sourceRef:\n kind: GitRepository\n name: addons" }, { "sha": "c9bbb152079b0cc5c336ac58bb0275f99f7598f3", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/vmware-csi/kustomization.yaml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fkustomization.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fkustomization.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fkustomization.yaml?ref=919469f6ec8827550101162b3710347d1ee8a735", "patch": "@@ -0,0 +1,8 @@\n+apiVersion: kustomize.config.k8s.io/v1beta1\n+kind: Kustomization\n+resources:\n+ - namespace.yaml\n+ - vsphere-cloud-controller-manager.yaml\n+ - vsphere-csi-externalsecrets.yaml\n+ - vsphere-csi-driver.yaml\n+ - vmware-sc.yaml\n\\ No newline at end of file" }, { "sha": "f6b4f38be04e8eaddc66820e904bd264357fa6dc", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/vmware-csi/namespace.yaml", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fnamespace.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fnamespace.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fnamespace.yaml?ref=919469f6ec8827550101162b3710347d1ee8a735", "patch": "@@ -1,4 +1,4 @@\n apiVersion: v1\n kind: Namespace\n metadata:\n- name: openebs\n\\ No newline at end of file\n+ name: vmware-system-csi\n\\ No newline at end of file", "previous_filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/openebs/namespace.yaml" }, { "sha": "14b2898cab6c32a63c95255bcc5c2ea1f03c4967", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/vmware-csi/vmware-sc.yaml", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvmware-sc.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvmware-sc.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvmware-sc.yaml?ref=919469f6ec8827550101162b3710347d1ee8a735", "patch": "@@ -0,0 +1,7 @@\n+kind: StorageClass\n+apiVersion: storage.k8s.io/v1\n+metadata:\n+ name: vmware-sc\n+ annotations:\n+ storageclass.kubernetes.io/is-default-class: \"true\"\n+provisioner: csi.vsphere.vmware.com\n\\ No newline at end of file" }, { "sha": "22880a6eac1e778d6743d587855d3f25331c54e9", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/vmware-csi/vsphere-cloud-controller-manager.yaml", "status": "added", "additions": 207, "deletions": 0, "changes": 207, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-cloud-controller-manager.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-cloud-controller-manager.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-cloud-controller-manager.yaml?ref=919469f6ec8827550101162b3710347d1ee8a735", "patch": "@@ -0,0 +1,207 @@\n+---\n+apiVersion: v1\n+kind: ServiceAccount\n+metadata:\n+ name: cloud-controller-manager\n+ labels:\n+ vsphere-cpi-infra: service-account\n+ component: cloud-controller-manager\n+ namespace: kube-system\n+---\n+apiVersion: rbac.authorization.k8s.io/v1\n+kind: RoleBinding\n+metadata:\n+ name: servicecatalog.k8s.io:apiserver-authentication-reader\n+ labels:\n+ vsphere-cpi-infra: role-binding\n+ component: cloud-controller-manager\n+ namespace: kube-system\n+roleRef:\n+ apiGroup: rbac.authorization.k8s.io\n+ kind: Role\n+ name: extension-apiserver-authentication-reader\n+subjects:\n+ - apiGroup: \"\"\n+ kind: ServiceAccount\n+ name: cloud-controller-manager\n+ namespace: kube-system\n+ - apiGroup: \"\"\n+ kind: User\n+ name: cloud-controller-manager\n+---\n+apiVersion: rbac.authorization.k8s.io/v1\n+kind: ClusterRoleBinding\n+metadata:\n+ name: system:cloud-controller-manager\n+ labels:\n+ vsphere-cpi-infra: cluster-role-binding\n+ component: cloud-controller-manager\n+roleRef:\n+ apiGroup: rbac.authorization.k8s.io\n+ kind: ClusterRole\n+ name: system:cloud-controller-manager\n+subjects:\n+ - kind: ServiceAccount\n+ name: cloud-controller-manager\n+ namespace: kube-system\n+ - kind: User\n+ name: cloud-controller-manager\n+---\n+apiVersion: rbac.authorization.k8s.io/v1\n+kind: ClusterRole\n+metadata:\n+ name: system:cloud-controller-manager\n+ labels:\n+ vsphere-cpi-infra: role\n+ component: cloud-controller-manager\n+rules:\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - events\n+ verbs:\n+ - create\n+ - patch\n+ - update\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - nodes\n+ verbs:\n+ - \"*\"\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - nodes/status\n+ verbs:\n+ - patch\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - services\n+ verbs:\n+ - list\n+ - patch\n+ - update\n+ - watch\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - services/status\n+ verbs:\n+ - patch\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - serviceaccounts\n+ verbs:\n+ - create\n+ - get\n+ - list\n+ - watch\n+ - update\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - persistentvolumes\n+ verbs:\n+ - get\n+ - list\n+ - update\n+ - watch\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - endpoints\n+ verbs:\n+ - create\n+ - get\n+ - list\n+ - watch\n+ - update\n+ - apiGroups:\n+ - \"\"\n+ resources:\n+ - secrets\n+ verbs:\n+ - get\n+ - list\n+ - watch\n+ - apiGroups:\n+ - \"coordination.k8s.io\"\n+ resources:\n+ - leases\n+ verbs:\n+ - create\n+ - get\n+ - list\n+ - watch\n+ - update\n+---\n+apiVersion: apps/v1\n+kind: DaemonSet\n+metadata:\n+ name: vsphere-cloud-controller-manager\n+ labels:\n+ component: cloud-controller-manager\n+ tier: control-plane\n+ namespace: kube-system\n+spec:\n+ selector:\n+ matchLabels:\n+ name: vsphere-cloud-controller-manager\n+ updateStrategy:\n+ type: RollingUpdate\n+ template:\n+ metadata:\n+ labels:\n+ name: vsphere-cloud-controller-manager\n+ component: cloud-controller-manager\n+ tier: control-plane\n+ spec:\n+ tolerations:\n+ - key: node.cloudprovider.kubernetes.io/uninitialized\n+ value: \"true\"\n+ effect: NoSchedule\n+ - key: node-role.kubernetes.io/master\n+ effect: NoSchedule\n+ operator: Exists\n+ - key: node-role.kubernetes.io/control-plane\n+ effect: NoSchedule\n+ operator: Exists\n+ - key: node.kubernetes.io/not-ready\n+ effect: NoSchedule\n+ operator: Exists\n+ securityContext:\n+ runAsUser: 1001\n+ serviceAccountName: cloud-controller-manager\n+ priorityClassName: system-node-critical\n+ containers:\n+ - name: vsphere-cloud-controller-manager\n+ image: gcr.io/cloud-provider-vsphere/cpi/release/manager:v1.28.0\n+ args:\n+ - --cloud-provider=vsphere\n+ - --v=2\n+ - --cloud-config=/etc/cloud/vsphere.conf\n+ volumeMounts:\n+ - mountPath: /etc/cloud\n+ name: vsphere-config-volume\n+ readOnly: true\n+ resources:\n+ requests:\n+ cpu: 200m\n+ hostNetwork: true\n+ volumes:\n+ - name: vsphere-config-volume\n+ secret:\n+ secretName: vsphere.conf\n+ affinity:\n+ nodeAffinity:\n+ requiredDuringSchedulingIgnoredDuringExecution:\n+ nodeSelectorTerms:\n+ - matchExpressions:\n+ - key: node-role.kubernetes.io/control-plane\n+ operator: Exists\n+ - matchExpressions:\n+ - key: node-role.kubernetes.io/master\n+ operator: Exists" }, { "sha": "44df966127dae65d97e92c2db484da62c5995333", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/vmware-csi/vsphere-csi-driver.yaml", "status": "added", "additions": 715, "deletions": 0, "changes": 715, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-csi-driver.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-csi-driver.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-csi-driver.yaml?ref=919469f6ec8827550101162b3710347d1ee8a735", "patch": "@@ -0,0 +1,715 @@\n+apiVersion: storage.k8s.io/v1\n+kind: CSIDriver\n+metadata:\n+ name: csi.vsphere.vmware.com\n+spec:\n+ attachRequired: true\n+ podInfoOnMount: false\n+---\n+kind: ServiceAccount\n+apiVersion: v1\n+metadata:\n+ name: vsphere-csi-controller\n+ namespace: vmware-system-csi\n+---\n+kind: ClusterRole\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+ name: vsphere-csi-controller-role\n+rules:\n+ - apiGroups: [\"\"]\n+ resources: [\"nodes\", \"pods\"]\n+ verbs: [\"get\", \"list\", \"watch\"]\n+ - apiGroups: [\"\"]\n+ resources: [\"configmaps\"]\n+ verbs: [\"get\", \"list\", \"watch\", \"create\"]\n+ - apiGroups: [\"\"]\n+ resources: [\"persistentvolumeclaims\"]\n+ verbs: [\"get\", \"list\", \"watch\", \"update\"]\n+ - apiGroups: [\"\"]\n+ resources: [\"persistentvolumeclaims/status\"]\n+ verbs: [\"patch\"]\n+ - apiGroups: [\"\"]\n+ resources: [\"persistentvolumes\"]\n+ verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"delete\", \"patch\"]\n+ - apiGroups: [\"\"]\n+ resources: [\"events\"]\n+ verbs: [\"get\", \"list\", \"watch\", \"create\", \"update\", \"patch\"]\n+ - apiGroups: [\"coordination.k8s.io\"]\n+ resources: [\"leases\"]\n+ verbs: [\"get\", \"watch\", \"list\", \"delete\", \"update\", \"create\"]\n+ - apiGroups: [\"storage.k8s.io\"]\n+ resources: [\"storageclasses\", \"csinodes\"]\n+ verbs: [\"get\", \"list\", \"watch\"]\n+ - apiGroups: [\"storage.k8s.io\"]\n+ resources: [\"volumeattachments\"]\n+ verbs: [\"get\", \"list\", \"watch\", \"patch\"]\n+ - apiGroups: [\"cns.vmware.com\"]\n+ resources: [\"triggercsifullsyncs\"]\n+ verbs: [\"create\", \"get\", \"update\", \"watch\", \"list\"]\n+ - apiGroups: [\"cns.vmware.com\"]\n+ resources: [\"cnsvspherevolumemigrations\"]\n+ verbs: [\"create\", \"get\", \"list\", \"watch\", \"update\", \"delete\"]\n+ - apiGroups: [\"cns.vmware.com\"]\n+ resources: [\"cnsvolumeinfoes\"]\n+ verbs: [\"create\", \"get\", \"list\", \"watch\", \"delete\"]\n+ - apiGroups: [\"apiextensions.k8s.io\"]\n+ resources: [\"customresourcedefinitions\"]\n+ verbs: [\"get\", \"create\", \"update\"]\n+ - apiGroups: [\"storage.k8s.io\"]\n+ resources: [\"volumeattachments/status\"]\n+ verbs: [\"patch\"]\n+ - apiGroups: [\"cns.vmware.com\"]\n+ resources: [\"cnsvolumeoperationrequests\"]\n+ verbs: [\"create\", \"get\", \"list\", \"update\", \"delete\"]\n+ - apiGroups: [ \"snapshot.storage.k8s.io\" ]\n+ resources: [ \"volumesnapshots\" ]\n+ verbs: [ \"get\", \"list\" ]\n+ - apiGroups: [ \"snapshot.storage.k8s.io\" ]\n+ resources: [ \"volumesnapshotclasses\" ]\n+ verbs: [ \"watch\", \"get\", \"list\" ]\n+ - apiGroups: [ \"snapshot.storage.k8s.io\" ]\n+ resources: [ \"volumesnapshotcontents\" ]\n+ verbs: [ \"create\", \"get\", \"list\", \"watch\", \"update\", \"delete\", \"patch\"]\n+ - apiGroups: [ \"snapshot.storage.k8s.io\" ]\n+ resources: [ \"volumesnapshotcontents/status\" ]\n+ verbs: [ \"update\", \"patch\" ]\n+ - apiGroups: [ \"cns.vmware.com\" ]\n+ resources: [ \"csinodetopologies\" ]\n+ verbs: [\"get\", \"update\", \"watch\", \"list\"]\n+---\n+kind: ClusterRoleBinding\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+ name: vsphere-csi-controller-binding\n+subjects:\n+ - kind: ServiceAccount\n+ name: vsphere-csi-controller\n+ namespace: vmware-system-csi\n+roleRef:\n+ kind: ClusterRole\n+ name: vsphere-csi-controller-role\n+ apiGroup: rbac.authorization.k8s.io\n+---\n+kind: ServiceAccount\n+apiVersion: v1\n+metadata:\n+ name: vsphere-csi-node\n+ namespace: vmware-system-csi\n+---\n+kind: ClusterRole\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+ name: vsphere-csi-node-cluster-role\n+rules:\n+ - apiGroups: [\"cns.vmware.com\"]\n+ resources: [\"csinodetopologies\"]\n+ verbs: [\"create\", \"watch\", \"get\", \"patch\"]\n+ - apiGroups: [\"\"]\n+ resources: [\"nodes\"]\n+ verbs: [\"get\"]\n+---\n+kind: ClusterRoleBinding\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+ name: vsphere-csi-node-cluster-role-binding\n+subjects:\n+ - kind: ServiceAccount\n+ name: vsphere-csi-node\n+ namespace: vmware-system-csi\n+roleRef:\n+ kind: ClusterRole\n+ name: vsphere-csi-node-cluster-role\n+ apiGroup: rbac.authorization.k8s.io\n+---\n+kind: Role\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+ name: vsphere-csi-node-role\n+ namespace: vmware-system-csi\n+rules:\n+ - apiGroups: [\"\"]\n+ resources: [\"configmaps\"]\n+ verbs: [\"get\", \"list\", \"watch\"]\n+---\n+kind: RoleBinding\n+apiVersion: rbac.authorization.k8s.io/v1\n+metadata:\n+ name: vsphere-csi-node-binding\n+ namespace: vmware-system-csi\n+subjects:\n+ - kind: ServiceAccount\n+ name: vsphere-csi-node\n+ namespace: vmware-system-csi\n+roleRef:\n+ kind: Role\n+ name: vsphere-csi-node-role\n+ apiGroup: rbac.authorization.k8s.io\n+---\n+apiVersion: v1\n+data:\n+ \"csi-migration\": \"true\"\n+ \"csi-auth-check\": \"true\"\n+ \"online-volume-extend\": \"true\"\n+ \"trigger-csi-fullsync\": \"false\"\n+ \"async-query-volume\": \"true\"\n+ \"block-volume-snapshot\": \"true\"\n+ \"csi-windows-support\": \"true\"\n+ \"use-csinode-id\": \"true\"\n+ \"list-volumes\": \"true\"\n+ \"pv-to-backingdiskobjectid-mapping\": \"false\"\n+ \"cnsmgr-suspend-create-volume\": \"true\"\n+ \"topology-preferential-datastores\": \"true\"\n+ \"max-pvscsi-targets-per-vm\": \"true\"\n+ \"multi-vcenter-csi-topology\": \"true\"\n+ \"csi-internal-generated-cluster-id\": \"true\"\n+ \"listview-tasks\": \"false\"\n+kind: ConfigMap\n+metadata:\n+ name: internal-feature-states.csi.vsphere.vmware.com\n+ namespace: vmware-system-csi\n+---\n+apiVersion: v1\n+kind: Service\n+metadata:\n+ name: vsphere-csi-controller\n+ namespace: vmware-system-csi\n+ labels:\n+ app: vsphere-csi-controller\n+spec:\n+ ports:\n+ - name: ctlr\n+ port: 2112\n+ targetPort: 2112\n+ protocol: TCP\n+ - name: syncer\n+ port: 2113\n+ targetPort: 2113\n+ protocol: TCP\n+ selector:\n+ app: vsphere-csi-controller\n+---\n+kind: Deployment\n+apiVersion: apps/v1\n+metadata:\n+ name: vsphere-csi-controller\n+ namespace: vmware-system-csi\n+spec:\n+ replicas: 3\n+ strategy:\n+ type: RollingUpdate\n+ rollingUpdate:\n+ maxUnavailable: 1\n+ maxSurge: 0\n+ selector:\n+ matchLabels:\n+ app: vsphere-csi-controller\n+ template:\n+ metadata:\n+ labels:\n+ app: vsphere-csi-controller\n+ role: vsphere-csi\n+ spec:\n+ priorityClassName: system-cluster-critical # Guarantees scheduling for critical system pods\n+ affinity:\n+ podAntiAffinity:\n+ requiredDuringSchedulingIgnoredDuringExecution:\n+ - labelSelector:\n+ matchExpressions:\n+ - key: \"app\"\n+ operator: In\n+ values:\n+ - vsphere-csi-controller\n+ topologyKey: \"kubernetes.io/hostname\"\n+ serviceAccountName: vsphere-csi-controller\n+ nodeSelector:\n+ node-role.kubernetes.io/control-plane: \"\"\n+ tolerations:\n+ - key: node-role.kubernetes.io/master\n+ operator: Exists\n+ effect: NoSchedule\n+ - key: node-role.kubernetes.io/control-plane\n+ operator: Exists\n+ effect: NoSchedule\n+ # uncomment below toleration if you need an aggressive pod eviction in case when\n+ # node becomes not-ready or unreachable. Default is 300 seconds if not specified.\n+ #- key: node.kubernetes.io/not-ready\n+ # operator: Exists\n+ # effect: NoExecute\n+ # tolerationSeconds: 30\n+ #- key: node.kubernetes.io/unreachable\n+ # operator: Exists\n+ # effect: NoExecute\n+ # tolerationSeconds: 30\n+ dnsPolicy: \"Default\"\n+ containers:\n+ - name: csi-attacher\n+ image: k8s.gcr.io/sig-storage/csi-attacher:v4.2.0\n+ args:\n+ - \"--v=4\"\n+ - \"--timeout=300s\"\n+ - \"--csi-address=$(ADDRESS)\"\n+ - \"--leader-election\"\n+ - \"--leader-election-lease-duration=120s\"\n+ - \"--leader-election-renew-deadline=60s\"\n+ - \"--leader-election-retry-period=30s\"\n+ - \"--kube-api-qps=100\"\n+ - \"--kube-api-burst=100\"\n+ env:\n+ - name: ADDRESS\n+ value: /csi/csi.sock\n+ volumeMounts:\n+ - mountPath: /csi\n+ name: socket-dir\n+ - name: csi-resizer\n+ image: k8s.gcr.io/sig-storage/csi-resizer:v1.7.0\n+ args:\n+ - \"--v=4\"\n+ - \"--timeout=300s\"\n+ - \"--handle-volume-inuse-error=false\"\n+ - \"--csi-address=$(ADDRESS)\"\n+ - \"--kube-api-qps=100\"\n+ - \"--kube-api-burst=100\"\n+ - \"--leader-election\"\n+ - \"--leader-election-lease-duration=120s\"\n+ - \"--leader-election-renew-deadline=60s\"\n+ - \"--leader-election-retry-period=30s\"\n+ env:\n+ - name: ADDRESS\n+ value: /csi/csi.sock\n+ volumeMounts:\n+ - mountPath: /csi\n+ name: socket-dir\n+ - name: vsphere-csi-controller\n+ image: gcr.io/cloud-provider-vsphere/csi/release/driver:v3.0.0\n+ args:\n+ - \"--fss-name=internal-feature-states.csi.vsphere.vmware.com\"\n+ - \"--fss-namespace=$(CSI_NAMESPACE)\"\n+ imagePullPolicy: \"Always\"\n+ env:\n+ - name: CSI_ENDPOINT\n+ value: unix:///csi/csi.sock\n+ - name: X_CSI_MODE\n+ value: \"controller\"\n+ - name: X_CSI_SPEC_DISABLE_LEN_CHECK\n+ value: \"true\"\n+ - name: X_CSI_SERIAL_VOL_ACCESS_TIMEOUT\n+ value: 3m\n+ - name: VSPHERE_CSI_CONFIG\n+ value: \"/etc/cloud/csi-vsphere.conf\"\n+ - name: LOGGER_LEVEL\n+ value: \"PRODUCTION\" # Options: DEVELOPMENT, PRODUCTION\n+ - name: INCLUSTER_CLIENT_QPS\n+ value: \"100\"\n+ - name: INCLUSTER_CLIENT_BURST\n+ value: \"100\"\n+ - name: CSI_NAMESPACE\n+ valueFrom:\n+ fieldRef:\n+ fieldPath: metadata.namespace\n+ volumeMounts:\n+ - mountPath: /etc/cloud\n+ name: vsphere-config-volume\n+ readOnly: true\n+ - mountPath: /csi\n+ name: socket-dir\n+ ports:\n+ - name: healthz\n+ containerPort: 9808\n+ protocol: TCP\n+ - name: prometheus\n+ containerPort: 2112\n+ protocol: TCP\n+ livenessProbe:\n+ httpGet:\n+ path: /healthz\n+ port: healthz\n+ initialDelaySeconds: 30\n+ timeoutSeconds: 10\n+ periodSeconds: 180\n+ failureThreshold: 3\n+ - name: liveness-probe\n+ image: k8s.gcr.io/sig-storage/livenessprobe:v2.9.0\n+ args:\n+ - \"--v=4\"\n+ - \"--csi-address=/csi/csi.sock\"\n+ volumeMounts:\n+ - name: socket-dir\n+ mountPath: /csi\n+ - name: vsphere-syncer\n+ image: gcr.io/cloud-provider-vsphere/csi/release/syncer:v3.0.0\n+ args:\n+ - \"--leader-election\"\n+ - \"--leader-election-lease-duration=120s\"\n+ - \"--leader-election-renew-deadline=60s\"\n+ - \"--leader-election-retry-period=30s\"\n+ - \"--fss-name=internal-feature-states.csi.vsphere.vmware.com\"\n+ - \"--fss-namespace=$(CSI_NAMESPACE)\"\n+ imagePullPolicy: \"Always\"\n+ ports:\n+ - containerPort: 2113\n+ name: prometheus\n+ protocol: TCP\n+ env:\n+ - name: FULL_SYNC_INTERVAL_MINUTES\n+ value: \"30\"\n+ - name: VSPHERE_CSI_CONFIG\n+ value: \"/etc/cloud/csi-vsphere.conf\"\n+ - name: LOGGER_LEVEL\n+ value: \"PRODUCTION\" # Options: DEVELOPMENT, PRODUCTION\n+ - name: INCLUSTER_CLIENT_QPS\n+ value: \"100\"\n+ - name: INCLUSTER_CLIENT_BURST\n+ value: \"100\"\n+ - name: GODEBUG\n+ value: x509sha1=1\n+ - name: CSI_NAMESPACE\n+ valueFrom:\n+ fieldRef:\n+ fieldPath: metadata.namespace\n+ volumeMounts:\n+ - mountPath: /etc/cloud\n+ name: vsphere-config-volume\n+ readOnly: true\n+ - name: csi-provisioner\n+ image: k8s.gcr.io/sig-storage/csi-provisioner:v3.4.0\n+ args:\n+ - \"--v=4\"\n+ - \"--timeout=300s\"\n+ - \"--csi-address=$(ADDRESS)\"\n+ - \"--kube-api-qps=100\"\n+ - \"--kube-api-burst=100\"\n+ - \"--leader-election\"\n+ - \"--leader-election-lease-duration=120s\"\n+ - \"--leader-election-renew-deadline=60s\"\n+ - \"--leader-election-retry-period=30s\"\n+ - \"--default-fstype=ext4\"\n+ # needed only for topology aware setup\n+ #- \"--feature-gates=Topology=true\"\n+ #- \"--strict-topology\"\n+ env:\n+ - name: ADDRESS\n+ value: /csi/csi.sock\n+ volumeMounts:\n+ - mountPath: /csi\n+ name: socket-dir\n+ - name: csi-snapshotter\n+ image: k8s.gcr.io/sig-storage/csi-snapshotter:v6.2.1\n+ args:\n+ - \"--v=4\"\n+ - \"--kube-api-qps=100\"\n+ - \"--kube-api-burst=100\"\n+ - \"--timeout=300s\"\n+ - \"--csi-address=$(ADDRESS)\"\n+ - \"--leader-election\"\n+ - \"--leader-election-lease-duration=120s\"\n+ - \"--leader-election-renew-deadline=60s\"\n+ - \"--leader-election-retry-period=30s\"\n+ env:\n+ - name: ADDRESS\n+ value: /csi/csi.sock\n+ volumeMounts:\n+ - mountPath: /csi\n+ name: socket-dir\n+ volumes:\n+ - name: vsphere-config-volume\n+ secret:\n+ secretName: vsphere-config-secret\n+ - name: socket-dir\n+ emptyDir: {}\n+---\n+kind: DaemonSet\n+apiVersion: apps/v1\n+metadata:\n+ name: vsphere-csi-node\n+ namespace: vmware-system-csi\n+spec:\n+ selector:\n+ matchLabels:\n+ app: vsphere-csi-node\n+ updateStrategy:\n+ type: \"RollingUpdate\"\n+ rollingUpdate:\n+ maxUnavailable: 1\n+ template:\n+ metadata:\n+ labels:\n+ app: vsphere-csi-node\n+ role: vsphere-csi\n+ spec:\n+ priorityClassName: system-node-critical\n+ nodeSelector:\n+ kubernetes.io/os: linux\n+ serviceAccountName: vsphere-csi-node\n+ hostNetwork: true\n+ dnsPolicy: \"ClusterFirstWithHostNet\"\n+ containers:\n+ - name: node-driver-registrar\n+ image: k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.7.0\n+ args:\n+ - \"--v=5\"\n+ - \"--csi-address=$(ADDRESS)\"\n+ - \"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\"\n+ env:\n+ - name: ADDRESS\n+ value: /csi/csi.sock\n+ - name: DRIVER_REG_SOCK_PATH\n+ value: /var/lib/kubelet/plugins/csi.vsphere.vmware.com/csi.sock\n+ volumeMounts:\n+ - name: plugin-dir\n+ mountPath: /csi\n+ - name: registration-dir\n+ mountPath: /registration\n+ livenessProbe:\n+ exec:\n+ command:\n+ - /csi-node-driver-registrar\n+ - --kubelet-registration-path=/var/lib/kubelet/plugins/csi.vsphere.vmware.com/csi.sock\n+ - --mode=kubelet-registration-probe\n+ initialDelaySeconds: 3\n+ - name: vsphere-csi-node\n+ image: gcr.io/cloud-provider-vsphere/csi/release/driver:v3.0.0\n+ args:\n+ - \"--fss-name=internal-feature-states.csi.vsphere.vmware.com\"\n+ - \"--fss-namespace=$(CSI_NAMESPACE)\"\n+ imagePullPolicy: \"Always\"\n+ env:\n+ - name: NODE_NAME\n+ valueFrom:\n+ fieldRef:\n+ fieldPath: spec.nodeName\n+ - name: CSI_ENDPOINT\n+ value: unix:///csi/csi.sock\n+ - name: MAX_VOLUMES_PER_NODE\n+ value: \"59\" # Maximum number of volumes that controller can publish to the node. If value is not set or zero Kubernetes decide how many volumes can be published by the controller to the node.\n+ - name: X_CSI_MODE\n+ value: \"node\"\n+ - name: X_CSI_SPEC_REQ_VALIDATION\n+ value: \"false\"\n+ - name: X_CSI_SPEC_DISABLE_LEN_CHECK\n+ value: \"true\"\n+ - name: LOGGER_LEVEL\n+ value: \"PRODUCTION\" # Options: DEVELOPMENT, PRODUCTION\n+ - name: GODEBUG\n+ value: x509sha1=1\n+ - name: CSI_NAMESPACE\n+ valueFrom:\n+ fieldRef:\n+ fieldPath: metadata.namespace\n+ - name: NODEGETINFO_WATCH_TIMEOUT_MINUTES\n+ value: \"1\"\n+ securityContext:\n+ privileged: true\n+ capabilities:\n+ add: [\"SYS_ADMIN\"]\n+ allowPrivilegeEscalation: true\n+ volumeMounts:\n+ - name: plugin-dir\n+ mountPath: /csi\n+ - name: pods-mount-dir\n+ mountPath: /var/lib/kubelet\n+ # needed so that any mounts setup inside this container are\n+ # propagated back to the host machine.\n+ mountPropagation: \"Bidirectional\"\n+ - name: device-dir\n+ mountPath: /dev\n+ - name: blocks-dir\n+ mountPath: /sys/block\n+ - name: sys-devices-dir\n+ mountPath: /sys/devices\n+ ports:\n+ - name: healthz\n+ containerPort: 9808\n+ protocol: TCP\n+ livenessProbe:\n+ httpGet:\n+ path: /healthz\n+ port: healthz\n+ initialDelaySeconds: 10\n+ timeoutSeconds: 5\n+ periodSeconds: 5\n+ failureThreshold: 3\n+ - name: liveness-probe\n+ image: k8s.gcr.io/sig-storage/livenessprobe:v2.9.0\n+ args:\n+ - \"--v=4\"\n+ - \"--csi-address=/csi/csi.sock\"\n+ volumeMounts:\n+ - name: plugin-dir\n+ mountPath: /csi\n+ volumes:\n+ - name: registration-dir\n+ hostPath:\n+ path: /var/lib/kubelet/plugins_registry\n+ type: Directory\n+ - name: plugin-dir\n+ hostPath:\n+ path: /var/lib/kubelet/plugins/csi.vsphere.vmware.com\n+ type: DirectoryOrCreate\n+ - name: pods-mount-dir\n+ hostPath:\n+ path: /var/lib/kubelet\n+ type: Directory\n+ - name: device-dir\n+ hostPath:\n+ path: /dev\n+ - name: blocks-dir\n+ hostPath:\n+ path: /sys/block\n+ type: Directory\n+ - name: sys-devices-dir\n+ hostPath:\n+ path: /sys/devices\n+ type: Directory\n+ tolerations:\n+ - effect: NoExecute\n+ operator: Exists\n+ - effect: NoSchedule\n+ operator: Exists\n+---\n+kind: DaemonSet\n+apiVersion: apps/v1\n+metadata:\n+ name: vsphere-csi-node-windows\n+ namespace: vmware-system-csi\n+spec:\n+ selector:\n+ matchLabels:\n+ app: vsphere-csi-node-windows\n+ updateStrategy:\n+ type: RollingUpdate\n+ rollingUpdate:\n+ maxUnavailable: 1\n+ template:\n+ metadata:\n+ labels:\n+ app: vsphere-csi-node-windows\n+ role: vsphere-csi-windows\n+ spec:\n+ priorityClassName: system-node-critical\n+ nodeSelector:\n+ kubernetes.io/os: windows\n+ serviceAccountName: vsphere-csi-node\n+ containers:\n+ - name: node-driver-registrar\n+ image: k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.7.0\n+ args:\n+ - \"--v=5\"\n+ - \"--csi-address=$(ADDRESS)\"\n+ - \"--kubelet-registration-path=$(DRIVER_REG_SOCK_PATH)\"\n+ env:\n+ - name: ADDRESS\n+ value: 'unix://C:\\\\csi\\\\csi.sock'\n+ - name: DRIVER_REG_SOCK_PATH\n+ value: 'C:\\\\var\\\\lib\\\\kubelet\\\\plugins\\\\csi.vsphere.vmware.com\\\\csi.sock'\n+ volumeMounts:\n+ - name: plugin-dir\n+ mountPath: /csi\n+ - name: registration-dir\n+ mountPath: /registration\n+ livenessProbe:\n+ exec:\n+ command:\n+ - /csi-node-driver-registrar.exe\n+ - --kubelet-registration-path=C:\\\\var\\\\lib\\\\kubelet\\\\plugins\\\\csi.vsphere.vmware.com\\\\csi.sock\n+ - --mode=kubelet-registration-probe\n+ initialDelaySeconds: 3\n+ - name: vsphere-csi-node\n+ image: gcr.io/cloud-provider-vsphere/csi/release/driver:v3.0.0\n+ args:\n+ - \"--fss-name=internal-feature-states.csi.vsphere.vmware.com\"\n+ - \"--fss-namespace=$(CSI_NAMESPACE)\"\n+ imagePullPolicy: \"Always\"\n+ env:\n+ - name: NODE_NAME\n+ valueFrom:\n+ fieldRef:\n+ apiVersion: v1\n+ fieldPath: spec.nodeName \n+ - name: CSI_ENDPOINT\n+ value: 'unix://C:\\\\csi\\\\csi.sock'\n+ - name: MAX_VOLUMES_PER_NODE\n+ value: \"59\" # Maximum number of volumes that controller can publish to the node. If value is not set or zero Kubernetes decide how many volumes can be published by the controller to the node.\n+ - name: X_CSI_MODE\n+ value: node\n+ - name: X_CSI_SPEC_REQ_VALIDATION\n+ value: 'false'\n+ - name: X_CSI_SPEC_DISABLE_LEN_CHECK\n+ value: \"true\"\n+ - name: LOGGER_LEVEL\n+ value: \"PRODUCTION\" # Options: DEVELOPMENT, PRODUCTION\n+ - name: X_CSI_LOG_LEVEL\n+ value: DEBUG\n+ - name: CSI_NAMESPACE\n+ valueFrom:\n+ fieldRef:\n+ fieldPath: metadata.namespace\n+ - name: NODEGETINFO_WATCH_TIMEOUT_MINUTES\n+ value: \"1\"\n+ volumeMounts:\n+ - name: plugin-dir\n+ mountPath: 'C:\\csi'\n+ - name: pods-mount-dir\n+ mountPath: 'C:\\var\\lib\\kubelet' \n+ - name: csi-proxy-volume-v1\n+ mountPath: \\\\.\\pipe\\csi-proxy-volume-v1\n+ - name: csi-proxy-filesystem-v1\n+ mountPath: \\\\.\\pipe\\csi-proxy-filesystem-v1\n+ - name: csi-proxy-disk-v1\n+ mountPath: \\\\.\\pipe\\csi-proxy-disk-v1 \n+ - name: csi-proxy-system-v1alpha1\n+ mountPath: \\\\.\\pipe\\csi-proxy-system-v1alpha1\n+ ports:\n+ - name: healthz\n+ containerPort: 9808\n+ protocol: TCP\n+ livenessProbe:\n+ httpGet:\n+ path: /healthz\n+ port: healthz\n+ initialDelaySeconds: 10\n+ timeoutSeconds: 5\n+ periodSeconds: 5\n+ failureThreshold: 3\n+ - name: liveness-probe\n+ image: k8s.gcr.io/sig-storage/livenessprobe:v2.9.0\n+ args:\n+ - \"--v=4\"\n+ - \"--csi-address=/csi/csi.sock\"\n+ volumeMounts:\n+ - name: plugin-dir\n+ mountPath: /csi\n+ volumes:\n+ - name: registration-dir\n+ hostPath:\n+ path: 'C:\\var\\lib\\kubelet\\plugins_registry\\'\n+ type: Directory\n+ - name: plugin-dir\n+ hostPath:\n+ path: 'C:\\var\\lib\\kubelet\\plugins\\csi.vsphere.vmware.com\\'\n+ type: DirectoryOrCreate\n+ - name: pods-mount-dir\n+ hostPath:\n+ path: \\var\\lib\\kubelet\n+ type: Directory\n+ - name: csi-proxy-disk-v1\n+ hostPath:\n+ path: \\\\.\\pipe\\csi-proxy-disk-v1\n+ type: ''\n+ - name: csi-proxy-volume-v1\n+ hostPath:\n+ path: \\\\.\\pipe\\csi-proxy-volume-v1\n+ type: ''\n+ - name: csi-proxy-filesystem-v1\n+ hostPath:\n+ path: \\\\.\\pipe\\csi-proxy-filesystem-v1\n+ type: ''\n+ - name: csi-proxy-system-v1alpha1\n+ hostPath:\n+ path: \\\\.\\pipe\\csi-proxy-system-v1alpha1\n+ type: ''\n+ tolerations:\n+ - effect: NoExecute\n+ operator: Exists\n+ - effect: NoSchedule\n+ operator: Exists\n\\ No newline at end of file" }, { "sha": "0ba9931c7bf5a22da94dd6264a7a2c462b4d8c1a", "filename": "eks-anywhere-vsphere/Addons/Core/storage-driver/vmware-csi/vsphere-csi-externalsecrets.yaml", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/mikemcd3912/eks-anywhere-addons/blob/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-csi-externalsecrets.yaml", "raw_url": "https://github.com/mikemcd3912/eks-anywhere-addons/raw/919469f6ec8827550101162b3710347d1ee8a735/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-csi-externalsecrets.yaml", "contents_url": "https://api.github.com/repos/mikemcd3912/eks-anywhere-addons/contents/eks-anywhere-vsphere%2FAddons%2FCore%2Fstorage-driver%2Fvmware-csi%2Fvsphere-csi-externalsecrets.yaml?ref=919469f6ec8827550101162b3710347d1ee8a735", "patch": "@@ -0,0 +1,37 @@\n+---\n+apiVersion: external-secrets.io/v1beta1\n+kind: ExternalSecret\n+metadata:\n+ name: vsphere-cloud-config\n+ namespace: kube-system\n+ labels:\n+ vsphere-cpi-infra: config\n+ component: cloud-controller-manager\n+spec:\n+ refreshInterval: 1m\n+ secretStoreRef:\n+ name: eksa-secret-store #The secret store name we have just created.\n+ kind: ClusterSecretStore\n+ target:\n+ name: vsphere.conf # Secret name in k8s\n+ data:\n+ - secretKey: vsphere.conf # which key it's going to be stored in\n+ remoteRef:\n+ key: vsphere.conf # External secret name goes here\n+---\n+apiVersion: external-secrets.io/v1beta1\n+kind: ExternalSecret\n+metadata:\n+ name: vsphere-config-secret\n+ namespace: vmware-system-csi\n+spec:\n+ refreshInterval: 1m\n+ secretStoreRef:\n+ name: eksa-secret-store #The secret store name we have just created.\n+ kind: ClusterSecretStore\n+ target:\n+ name: vsphere-config-secret # Secret name in k8s\n+ data:\n+ - secretKey: csi-vsphere.conf # which key it's going to be stored in\n+ remoteRef:\n+ key: csi-vsphere.conf # External secret name goes here\n\\ No newline at end of file" } ]